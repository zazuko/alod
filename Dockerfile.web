FROM node:12

RUN npm install -g pm2

RUN mkdir -p /opt/trifid
WORKDIR /opt/trifid
COPY . /opt/trifid
RUN npm ci

ENV NODE_ENV production

CMD pm2-docker start npm -- start

EXPOSE 8080
